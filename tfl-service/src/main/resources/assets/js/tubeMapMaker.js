var lines = {};
var stations = {};
var connections = {};

var LINE_BAKERLOO = "Bakerloo";
var LINE_CENTRAL = "Central";
var LINE_CIRCLE = "Circle";
var LINE_DISTRICT = "District";
var LINE_HAMMERSMITH = "Hammersmith & City";
var LINE_JUBILEE = "Jubilee";
var LINE_METROPOLITAN = "Metropolitan";
var LINE_NOTHERN = "Nothern";
var LINE_PICADILLY = "Piccadilly";
var LINE_VICTORIA = "Victoria";
var LINE_WATERLOO = "Waterloo & City";
var LINE_DLR = "DLR";
var LINE_OVERGROUND = "London Overground";

function addLines() {
	addLine(LINE_BAKERLOO, "#b36305");
	addLine(LINE_CENTRAL, "#e32017");
	addLine(LINE_CIRCLE, "#ffd300");
	addLine(LINE_DISTRICT, "#00782a");
	addLine(LINE_HAMMERSMITH, "#f3a9bb");
	addLine(LINE_JUBILEE, "#a0a5a9");
	addLine(LINE_METROPOLITAN, "#9b0056");
	addLine(LINE_NOTHERN, "#000000");
	addLine(LINE_PICADILLY, "#003688");
	addLine(LINE_VICTORIA, "#0098d4");
	addLine(LINE_WATERLOO, "#95cdba");
	addLine(LINE_DLR, "#00a4a7");
	addLine(LINE_OVERGROUND, "#ee7c0e");
}

function addStations() {
    // Circle
    addStation(LINE_CIRCLE, HAMMERSMITH, "664.95", "955.89");
    addStation(LINE_CIRCLE, GOLDHAWK_ROAD, "664.95", "923");
    addStation(LINE_CIRCLE, SHEPHERDS_BUSH_MARKET, "664.95", "882");
    addStation(LINE_CIRCLE, WOOD_LANE, "664.95", "822");
    addStation(LINE_CIRCLE, LATIMER_ROAD, "669", "727");
    addStation(LINE_CIRCLE, LADBROKE_GROVE, "692", "704");
    addStation(LINE_CIRCLE, WESTBOURNE_PARK, "708", "688");
    addStation(LINE_CIRCLE, ROYAL_OAK, "733", "664");
    addStation(LINE_CIRCLE, PADDINGTON_2, "804", "647.7");
    addStation(LINE_CIRCLE, EDGWARE_ROAD_1, "903", "647.7");
    addStation(LINE_CIRCLE, BAKER_STREET, "1048", "647.7");
    addStation(LINE_CIRCLE, GREAT_PORTLAND_STREET, "1132", "647.7");
    addStation(LINE_CIRCLE, EUSTON_SQUARE, "1266", "647.7");
    addStation(LINE_CIRCLE, KINGS_CROSS, "1356", "647.7");
    addStation(LINE_CIRCLE, FARRINGDON, "1411", "682");
    addStation(LINE_CIRCLE, BARBICAN, "1448", "717");
    addStation(LINE_CIRCLE, MOORGATE, "1483", "738.57");
    addStation(LINE_CIRCLE, LIVERPOOL_STREET, "1588", "738.57");
    addStation(LINE_CIRCLE, ALDGATE, "1649.6", "835");
    addStation(LINE_CIRCLE, TOWER_HILL, "1615", "884.07");
    addStation(LINE_CIRCLE, MONUMENT, "1511", "884.07");
    addStation(LINE_CIRCLE, CANNON_STREET, "1440.2", "907");
    addStation(LINE_CIRCLE, MANSION_HOUSE, "1413.2", "934");
    addStation(LINE_CIRCLE, BLACKFRIARS, "1387.2", "960");
    addStation(LINE_CIRCLE, TEMPLE, "1299", "986.62");
    addStation(LINE_CIRCLE, EMBANKMENT, "1218", "986.62");
    addStation(LINE_CIRCLE, WESTMINSTER, "1163", "986.62");
    addStation(LINE_CIRCLE, ST_JAMESS_PARK, "1083", "986.62");
    addStation(LINE_CIRCLE, VICTORIA, "1043", "986.62");
    addStation(LINE_CIRCLE, SLOANE_SQUARE, "977", "986.62");
    addStation(LINE_CIRCLE, SOUTH_KENSINGTON, "901", "986.62");
    addStation(LINE_CIRCLE, GLOUCESTER_ROAD, "865", "986.62");
    addStation(LINE_CIRCLE, HIGH_STREET_KENSINGTON, "828.95", "860");
    addStation(LINE_CIRCLE, NOTTING_HILL_GATE, "828.95", "792");
    addStation(LINE_CIRCLE, BAYSWATER, "828.95", "726");
    addStation(LINE_CIRCLE, PADDINGTON_3, "835.28", "671.48");
    addStation(LINE_CIRCLE, EDGWARE_ROAD_2, "907.19", "665.15");

    // District - Upminster to Ealing Broadway
    addStation(LINE_DISTRICT, UPMINSTER, "2408.41", "371.53");
    addStation(LINE_DISTRICT, UPMINSTER_BRIDGE, "2374", "405");
    addStation(LINE_DISTRICT, HORNCHURCH, "2343", "436");
    addStation(LINE_DISTRICT, ELM_PARK, "2324", "455");
    addStation(LINE_DISTRICT, DAGENHAM_EAST, "2292", "486");
    addStation(LINE_DISTRICT, DAGENHAM_HEATHWAY, "2270", "508");
    addStation(LINE_DISTRICT, BECONTREE, "2229", "549");
    addStation(LINE_DISTRICT, UPNEY, "2200", "578");
    addStation(LINE_DISTRICT, BARKING, "2168", "610");
    addStation(LINE_DISTRICT, EAST_HAM, "2138", "641");
    addStation(LINE_DISTRICT, PLAISTOW, "2091", "686");
    addStation(LINE_DISTRICT, WEST_HAM, "2033", "720.08");
    addStation(LINE_DISTRICT, BROMLEY_BY_BOW, "1995", "720.08");
    addStation(LINE_DISTRICT, BOW_ROAD, "1916", "720.08");
    addStation(LINE_DISTRICT, MILE_END, "1848", "720.08");
    addStation(LINE_DISTRICT, STEPNEY_GREEN, "1768", "771");
    addStation(LINE_DISTRICT, WHITECHAPEL, "1736", "802");
    addStation(LINE_DISTRICT, ALDGATE_EAST, "1713", "826");
    addStation(LINE_DISTRICT, TOWER_HILL, "1615", "889");
    addStation(LINE_DISTRICT, MONUMENT, "1511", "889");
    addStation(LINE_DISTRICT, CANNON_STREET, "1442", "912");
    addStation(LINE_DISTRICT, EMBANKMENT, "1218", "992");
    addStation(LINE_DISTRICT, WESTMINSTER, "1163", "992");
    addStation(LINE_DISTRICT, VICTORIA, "1043", "992");
    addStation(LINE_DISTRICT, SLOANE_SQUARE, "977", "992");
    addStation(LINE_DISTRICT, SOUTH_KENSINGTON, "901", "992");
    addStation(LINE_DISTRICT, EARLS_COURT, "796", "992");
    addStation(LINE_DISTRICT, WEST_KENSINGTON, "748", "992");
    addStation(LINE_DISTRICT, BARONS_COURT, "704", "992");
    addStation(LINE_DISTRICT, HAMMERSMITH, "660", "992");
    addStation(LINE_DISTRICT, RAVENSCOURT_PARK, "615", "992");
    addStation(LINE_DISTRICT, STAMFORD_BROOK, "545", "992");
    addStation(LINE_DISTRICT, TURNHAM_GREEN, "484", "992");
    addStation(LINE_DISTRICT, CHISWICK_PARK, "408", "992");
    addStation(LINE_DISTRICT, ACTON_TOWN, "379", "977");
    addStation(LINE_DISTRICT, EALING_COMMON, "361.07", "886");
    addStation(LINE_DISTRICT, EALING_BROADWAY, "318.5", "796.52");

    // District - Turnham Green to Richmond
    addStation(LINE_DISTRICT, GUNNERSBURY, "456.66", "1090");
    addStation(LINE_DISTRICT, KEW_GARDENS, "456.66", "1138");
    addStation(LINE_DISTRICT, RICHMOND, "456.66", "1177.98");

    // District - Earls Court to Wimbledom
    addStation(LINE_DISTRICT, WEST_BROMPTON, "782.49", "1062");
    addStation(LINE_DISTRICT, FULHAM_BROADWAY, "782.49", "1130");
    addStation(LINE_DISTRICT, PARSONS_GREEN, "782.49", "1165");
    addStation(LINE_DISTRICT, PUTNEY_BRIDGE, "782.49", "1197");
    addStation(LINE_DISTRICT, EAST_PUTNEY, "782.49", "1243");
    addStation(LINE_DISTRICT, SOUTHFIELDS, "782.49", "1276");
    addStation(LINE_DISTRICT, WIMBLEDON_PARK, "782.49", "1309");
    addStation(LINE_DISTRICT, WIMBLEDON, "782.49", "1343.07");

    // District - Earls Court to Kensington
    addStation(LINE_DISTRICT, KENSINGTON, "782.49", "909.04");

    // TODO: District - Earls Court to Edgware Road

    // Hammersmith
    addStation(LINE_HAMMERSMITH, HAMMERSMITH, "660.29", "955.89");
    addStation(LINE_HAMMERSMITH, GOLDHAWK_ROAD, "660.29", "923");
    addStation(LINE_HAMMERSMITH, SHEPHERDS_BUSH_MARKET, "660.29", "882");
    addStation(LINE_HAMMERSMITH, WOOD_LANE, "660.29", "822");
    addStation(LINE_HAMMERSMITH, LATIMER_ROAD, "666", "723");
    addStation(LINE_HAMMERSMITH, LADBROKE_GROVE, "688", "701");
    addStation(LINE_HAMMERSMITH, WESTBOURNE_PARK, "705", "684");
    addStation(LINE_HAMMERSMITH, ROYAL_OAK, "731", "659");
    addStation(LINE_HAMMERSMITH, PADDINGTON_2, "804", "642.7");
    addStation(LINE_HAMMERSMITH, EDGWARE_ROAD_1, "903", "642.7");
    addStation(LINE_HAMMERSMITH, BAKER_STREET, "1048", "642.7");
    addStation(LINE_HAMMERSMITH, GREAT_PORTLAND_STREET, "1132", "642.7");
    addStation(LINE_HAMMERSMITH, EUSTON_SQUARE, "1266", "642.7");
    addStation(LINE_HAMMERSMITH, KINGS_CROSS, "1356", "642.7");
    addStation(LINE_HAMMERSMITH, FARRINGDON, "1416", "679.4");
    addStation(LINE_HAMMERSMITH, BARBICAN, "1453", "715");
    addStation(LINE_HAMMERSMITH, MOORGATE, "1483", "733.4");
    addStation(LINE_HAMMERSMITH, LIVERPOOL_STREET, "1588", "733.4");
    addStation(LINE_HAMMERSMITH, ALDGATE_EAST, "1710", "822");
    addStation(LINE_HAMMERSMITH, WHITECHAPEL, "1734", "798");
    addStation(LINE_HAMMERSMITH, STEPNEY_GREEN, "1765", "767");
    addStation(LINE_HAMMERSMITH, MILE_END, "1848", "715.41");
    addStation(LINE_HAMMERSMITH, BOW_ROAD, "1916", "715.41");
    addStation(LINE_HAMMERSMITH, BROMLEY_BY_BOW, "1995", "715.41");
    addStation(LINE_HAMMERSMITH, WEST_HAM, "2033", "715.41");
    addStation(LINE_HAMMERSMITH, PLAISTOW, "2088", "683.5");
    addStation(LINE_HAMMERSMITH, UPTON_PARK, "2115", "656.5");
    addStation(LINE_HAMMERSMITH, EAST_HAM, "2135", "636.6");
    addStation(LINE_HAMMERSMITH, BARKING, "2171.34", "600.4");

    // Jubilee
    addStation(LINE_JUBILEE, STANMORE, "760.34", "196.08");
    addStation(LINE_JUBILEE, CANNONS_PARK, "760.34", "229");
    addStation(LINE_JUBILEE, QUEENSBURY, "760.34", "263");
    addStation(LINE_JUBILEE, KINGSBURY, "760.34", "294");
    addStation(LINE_JUBILEE, WEMBLEY_PARK, "772", "343");
    addStation(LINE_JUBILEE, NEASDEN, "797", "364");
    addStation(LINE_JUBILEE, DOLLIS_HILL, "825", "392");
    addStation(LINE_JUBILEE, WILLESDEN_GREEN, "855", "422");
    addStation(LINE_JUBILEE, KILBURN, "887", "455");
    addStation(LINE_JUBILEE, WEST_HAMPSTEAD, "912", "482");
    addStation(LINE_JUBILEE, FINCHLEY_ROAD, "942", "512");
    addStation(LINE_JUBILEE, SWISS_COTTAGE, "964", "532");
    addStation(LINE_JUBILEE, ST_JOHNS_WOOD, "988", "556");
    addStation(LINE_JUBILEE, BAKER_STREET, "1027", "675");
    addStation(LINE_JUBILEE, BOND_STREET, "1027", "791");
    addStation(LINE_JUBILEE, GREEN_PARK, "1042.98", "872.15");
    addStation(LINE_JUBILEE, WESTMINSTER, "1162", "990");
    addStation(LINE_JUBILEE, WATERLOO, "1201.27", "1058");
    addStation(LINE_JUBILEE, SOUTHWARK, "1297", "1091.34");
    addStation(LINE_JUBILEE, LONDON_BRIDGE, "1482", "1001.37");
    addStation(LINE_JUBILEE, BERMONDSEY, "1616", "1001.37");
    addStation(LINE_JUBILEE, CANADA_WATER, "1735", "1001.37");
    addStation(LINE_JUBILEE, CANARY_WHARF, "1890", "1001.37");
    addStation(LINE_JUBILEE, NORTH_GREENWICH, "1972", "990");
    addStation(LINE_JUBILEE, CANNING_TOWN, "2032.79", "882");
    addStation(LINE_JUBILEE, WEST_HAM, "2032.79", "721");
    addStation(LINE_JUBILEE, STRATFORD, "1981.42", "578.28");

    // Picadilly - Cockfosters to Uxbridge
    addStation(LINE_PICADILLY, COCKFOSTERS, "1633.34", "63.45");
    addStation(LINE_PICADILLY, OAKWOOD, "1633.34", "96");
    addStation(LINE_PICADILLY, SOUTHGATE, "1633.34", "131");
    addStation(LINE_PICADILLY, ARNOS_GROVE, "1633.34", "163");
    addStation(LINE_PICADILLY, BOUNDS_GREEN, "1633.34", "196");
    addStation(LINE_PICADILLY, WOOD_GREEN, "1633.34", "229");
    addStation(LINE_PICADILLY, TURNPIKE_LANE, "1633.34", "262");
    addStation(LINE_PICADILLY, MANOR_HOUSE, "1633.34", "310");
    addStation(LINE_PICADILLY, FINSBURY_PARK, "1602", "354");
    addStation(LINE_PICADILLY, ARSENAL, "1551", "405");
    addStation(LINE_PICADILLY, HOLLOWAY_ROAD, "1521", "434");
    addStation(LINE_PICADILLY, CALEDONIAN_ROAD, "1489", "467");
    addStation(LINE_PICADILLY, KINGS_CROSS, "1354", "602");
    addStation(LINE_PICADILLY, RUSSELL_SQUARE, "1299.31", "728");
    addStation(LINE_PICADILLY, HOLBORN, "1281", "792");
    addStation(LINE_PICADILLY, COVENT_GARDEN, "1248", "825");
    addStation(LINE_PICADILLY, LEICESTER_SQUARE, "1219", "853");
    addStation(LINE_PICADILLY, PICCADILLY_CIRCUS, "1156", "872.15");
    addStation(LINE_PICADILLY, GREEN_PARK, "1042.98", "872.15");
    addStation(LINE_PICADILLY, HYDE_PARK_CORNER, "995", "901");
    addStation(LINE_PICADILLY, KNIGHTSBRIDGE, "969", "927");
    addStation(LINE_PICADILLY, SOUTH_KENSINGTON, "902", "977.3");
    addStation(LINE_PICADILLY, GLOUCESTER_ROAD, "865", "977.3");
    addStation(LINE_PICADILLY, EARLS_COURT, "796", "977.3");
    addStation(LINE_PICADILLY, BARONS_COURT, "704", "977.3");
    addStation(LINE_PICADILLY, HAMMERSMITH, "660", "977.3");
    addStation(LINE_PICADILLY, TURNHAM_GREEN, "484", "977.3");
    addStation(LINE_PICADILLY, ACTON_TOWN, "379", "977");
    addStation(LINE_PICADILLY, EALING_COMMON, "366", "886");
    addStation(LINE_PICADILLY, NORTH_EALING, "366", "751");
    addStation(LINE_PICADILLY, PARK_ROYAL, "366", "706");
    addStation(LINE_PICADILLY, ALPERTON, "366", "522");
    addStation(LINE_PICADILLY, SUDBURY_TOWN, "366", "467");
    addStation(LINE_PICADILLY, SUDBURY_HILL, "366", "413");
    addStation(LINE_PICADILLY, SOUTH_HARROW, "366", "359");
    addStation(LINE_PICADILLY, RAYNERS_LANE, "353", "295");
    addStation(LINE_PICADILLY, EASTCOTE, "327", "270");
    addStation(LINE_PICADILLY, RUISLIP_MANOR, "294", "237");
    addStation(LINE_PICADILLY, RUISLIP, "255", "226.3");
    addStation(LINE_PICADILLY, ICKENHAM, "169", "226.3");
    addStation(LINE_PICADILLY, HILLINGDON, "112", "226.3");
    addStation(LINE_PICADILLY, UXBRIDGE, "27.14", "226.3");

    // Picadilly - Hatton Cross to Heathrow Terminals 123
    addStation(LINE_PICADILLY, HEATHROW_TERMINAL_4, "124", "1248");

    // Picadilly - Acton Town to Hatton Cross
    addStation(LINE_PICADILLY, SOUTH_EALING, "338", "986");
    addStation(LINE_PICADILLY, NORTHFIELDS, "309", "1015");
    addStation(LINE_PICADILLY, BOSTON_MANOR, "280", "1044");
    addStation(LINE_PICADILLY, OSTERLEY, "252", "1073");
    addStation(LINE_PICADILLY, HOUNSLOW_EAST, "223", "1101");
    addStation(LINE_PICADILLY, HOUNSLOW_CENTRAL, "194", "1130");
    addStation(LINE_PICADILLY, HOUNSLOW_WEST, "171", "1153");
    addStation(LINE_PICADILLY, HATTON_CROSS, "143", "1181");

    // Picadilly - Hatton Cross to Heathrow Terminal 5
    addStation(LINE_PICADILLY, HEATHROW_TERMINALS_123, "102", "1222");
    addStation(LINE_PICADILLY, HEATHROW_TERMINAL_5, "34", "1290");

    // Victoria
	addStation(LINE_VICTORIA, BRIXTON, "1220.47", "1388.78");
	addStation(LINE_VICTORIA, STOCKWELL, "1164", "1332");
	addStation(LINE_VICTORIA, VAUXHALL,  "1069", "1238");
	addStation(LINE_VICTORIA, PIMLICO, "1042.98", "1120.44");
	addStation(LINE_VICTORIA, VICTORIA, "1042.98", "989");
	addStation(LINE_VICTORIA, GREEN_PARK, "1042.98", "872.15");
	addStation(LINE_VICTORIA, OXFORD_CIRCUS, "1100", "792");
	addStation(LINE_VICTORIA, WARREN_STREET, "1218", "678");
	addStation(LINE_VICTORIA, EUSTON, "1280", "614");
	addStation(LINE_VICTORIA, KINGS_CROSS, "1354", "602");
	addStation(LINE_VICTORIA, HIGHBURY_AND_ISLINGTON, "1571.98", "504");
	addStation(LINE_VICTORIA, FINSBURY_PARK, "1620", "373");
	addStation(LINE_VICTORIA, SEVEN_SISTERS, "1716", "341");
	addStation(LINE_VICTORIA, TOTTENHAM_HALE, "1773", "341");
	addStation(LINE_VICTORIA, BLACKHORSE_ROAD, "1826", "341");
	addStation(LINE_VICTORIA, WALTHAMSTOW_CENTRAL, "1918.48", "341");
}

function addConnections() {
    // Circle
    joinStation(LINE_CIRCLE, HAMMERSMITH, GOLDHAWK_ROAD);
    joinStation(LINE_CIRCLE, GOLDHAWK_ROAD, SHEPHERDS_BUSH_MARKET);
    joinStation(LINE_CIRCLE, SHEPHERDS_BUSH_MARKET, WOOD_LANE);
    joinStation(LINE_CIRCLE, WOOD_LANE, LATIMER_ROAD, "664.95 737.93 C 664.93 736.76 665.4 734.47 666.28 732.39");
    joinStation(LINE_CIRCLE, LATIMER_ROAD, LADBROKE_GROVE);
    joinStation(LINE_CIRCLE, LADBROKE_GROVE, WESTBOURNE_PARK);
    joinStation(LINE_CIRCLE, WESTBOURNE_PARK, ROYAL_OAK);
    joinStation(LINE_CIRCLE, ROYAL_OAK, PADDINGTON_2, "742.79 654 C 746.91 649.89 752.25 647.68 758.06 647.68");
    joinStation(LINE_CIRCLE, PADDINGTON_2, EDGWARE_ROAD_1);
    joinStation(LINE_CIRCLE, EDGWARE_ROAD_1, BAKER_STREET);
    joinStation(LINE_CIRCLE, BAKER_STREET, GREAT_PORTLAND_STREET);
    joinStation(LINE_CIRCLE, GREAT_PORTLAND_STREET, EUSTON_SQUARE);
    joinStation(LINE_CIRCLE, EUSTON_SQUARE, KINGS_CROSS);
    joinStation(LINE_CIRCLE, KINGS_CROSS, FARRINGDON, "1369.42 647.67 C 1375.39 647.67 1380.79 650.09 1384.71 654");
    joinStation(LINE_CIRCLE, FARRINGDON, BARBICAN);
    joinStation(LINE_CIRCLE, BARBICAN, MOORGATE, "1462.96 732.25 C 1466.88 736.16 1472.28 738.57 1478.25 738.57");
    joinStation(LINE_CIRCLE, MOORGATE, LIVERPOOL_STREET);
    joinStation(LINE_CIRCLE, LIVERPOOL_STREET, ALDGATE, "1628 738.57 C 1633.97 738.57 1639.37 740.99 1643.28 744.9 L 1643.28 744.9 C 1647.19 748.82 1649.61 754.22 1649.61 760.18");
    joinStation(LINE_CIRCLE, ALDGATE, TOWER_HILL, "1649.61 862.46 C 1649.61 868.42 1647.19 873.83 1643.28 877.74 L 1643.28 877.74 S 1633.97 884.07 1628 884.07");
    joinStation(LINE_CIRCLE, TOWER_HILL, MONUMENT);
    joinStation(LINE_CIRCLE, MONUMENT, CANNON_STREET, "1472.08 884.07 C 1466.11 884.07 1460.71 886.49 1456.8 890.4");
    joinStation(LINE_CIRCLE, CANNON_STREET, MANSION_HOUSE);
    joinStation(LINE_CIRCLE, MANSION_HOUSE, BLACKFRIARS);
    joinStation(LINE_CIRCLE, BLACKFRIARS, TEMPLE, "1364.97 982.24 C 1362.14 985.06 1358.38 986.62 1354.39 986.62");
    joinStation(LINE_CIRCLE, TEMPLE, EMBANKMENT);
    joinStation(LINE_CIRCLE, EMBANKMENT, WESTMINSTER);
    joinStation(LINE_CIRCLE, WESTMINSTER, ST_JAMESS_PARK);
    joinStation(LINE_CIRCLE, ST_JAMESS_PARK, VICTORIA);
    joinStation(LINE_CIRCLE, VICTORIA, SLOANE_SQUARE);
    joinStation(LINE_CIRCLE, SLOANE_SQUARE, SOUTH_KENSINGTON);
    joinStation(LINE_CIRCLE, SOUTH_KENSINGTON, GLOUCESTER_ROAD);
    joinStation(LINE_CIRCLE, GLOUCESTER_ROAD, HIGH_STREET_KENSINGTON, "850.56 986.62 C 844.6 986.62 839.19 984.2 835.28 980.3 L 835.28 980.3 C 831.06 976.07 828.95 970.54 828.95 965.01");
    joinStation(LINE_CIRCLE, HIGH_STREET_KENSINGTON, NOTTING_HILL_GATE);
    joinStation(LINE_CIRCLE, NOTTING_HILL_GATE, BAYSWATER);
    joinStation(LINE_CIRCLE, BAYSWATER, PADDINGTON_3, "828.95 686.76 C 828.95 680.79 831.37 675.39 835.28 671.48");
    joinStation(LINE_CIRCLE, PADDINGTON_3, EDGWARE_ROAD_2, "835.28 671.48 C 839.19 667.56 844.6 665.15 850.56 665.15");

    // District - Upminster to Ealing Broadway
    joinStation(LINE_DISTRICT, UPMINSTER, UPMINSTER_BRIDGE);
    joinStation(LINE_DISTRICT, UPMINSTER_BRIDGE, HORNCHURCH);
    joinStation(LINE_DISTRICT, HORNCHURCH, ELM_PARK);
    joinStation(LINE_DISTRICT, ELM_PARK, DAGENHAM_EAST);
    joinStation(LINE_DISTRICT, DAGENHAM_EAST, DAGENHAM_HEATHWAY);
    joinStation(LINE_DISTRICT, DAGENHAM_HEATHWAY, BECONTREE);
    joinStation(LINE_DISTRICT, BECONTREE, UPNEY);
    joinStation(LINE_DISTRICT, UPNEY, BARKING);
    joinStation(LINE_DISTRICT, BARKING, EAST_HAM);
    joinStation(LINE_DISTRICT, EAST_HAM, PLAISTOW);
    joinStation(LINE_DISTRICT, PLAISTOW, WEST_HAM, "2067.13 711.5 C 2063.69 715.5 2056.89 720 2052.02 720.08");
    joinStation(LINE_DISTRICT, WEST_HAM, BROMLEY_BY_BOW);
    joinStation(LINE_DISTRICT, BROMLEY_BY_BOW, BOW_ROAD);
    joinStation(LINE_DISTRICT, BOW_ROAD, MILE_END);
    joinStation(LINE_DISTRICT, MILE_END, STEPNEY_GREEN, "1830.59 720.07 C 1821.73 720.07 1814.92 723.88 1811.48 727.33");
    joinStation(LINE_DISTRICT, STEPNEY_GREEN, WHITECHAPEL);
    joinStation(LINE_DISTRICT, WHITECHAPEL, ALDGATE_EAST);
    joinStation(LINE_DISTRICT, ALDGATE_EAST, TOWER_HILL, "1657.38 881.44 C 1652.04 886.78 1644.94 889 1637.39 889");
    joinStation(LINE_DISTRICT, TOWER_HILL, MONUMENT);
    joinStation(LINE_DISTRICT, MONUMENT, CANNON_STREET, "1472.08 889 C 1467.5 889 1463 891.27 1460.5 894.1");
    joinStation(LINE_DISTRICT, CANNON_STREET, EMBANKMENT, "1368.67 985.93 C 1364.76 989.84 1359.36 991.5 1353.39 991.5");
    joinStation(LINE_DISTRICT, EMBANKMENT, WESTMINSTER);
    joinStation(LINE_DISTRICT, WESTMINSTER, VICTORIA);
    joinStation(LINE_DISTRICT, VICTORIA, SLOANE_SQUARE);
    joinStation(LINE_DISTRICT, SLOANE_SQUARE, SOUTH_KENSINGTON);
    joinStation(LINE_DISTRICT, SOUTH_KENSINGTON, EARLS_COURT);
    joinStation(LINE_DISTRICT, EARLS_COURT, WEST_KENSINGTON);
    joinStation(LINE_DISTRICT, WEST_KENSINGTON, BARONS_COURT);
    joinStation(LINE_DISTRICT, BARONS_COURT, HAMMERSMITH);
    joinStation(LINE_DISTRICT, HAMMERSMITH, RAVENSCOURT_PARK);
    joinStation(LINE_DISTRICT, RAVENSCOURT_PARK, STAMFORD_BROOK);
    joinStation(LINE_DISTRICT, STAMFORD_BROOK, TURNHAM_GREEN);
    joinStation(LINE_DISTRICT, TURNHAM_GREEN, CHISWICK_PARK);
    joinStation(LINE_DISTRICT, CHISWICK_PARK, ACTON_TOWN, "404.21 992 C 400 991.5 393.84 989 390 986");
    joinStation(LINE_DISTRICT, ACTON_TOWN, EALING_COMMON, "371.4 969.41 C 367.49 965.51 361.07 960.1 361.07 953.13");
    joinStation(LINE_DISTRICT, EALING_COMMON, EALING_BROADWAY, "361.07 822.13 C 361.07 806.16 346.65 797.76 333.16 796.52");

    // District - Turnham Green to Richmond
    joinStation(LINE_DISTRICT, TURNHAM_GREEN, GUNNERSBURY, "478.27 992 C 471.3 992 459 997 456.66 1013");
    joinStation(LINE_DISTRICT, GUNNERSBURY, KEW_GARDENS);
    joinStation(LINE_DISTRICT, KEW_GARDENS, RICHMOND);

    // District - Earls Court to Wimbledom
    joinStation(LINE_DISTRICT, EARLS_COURT, WEST_BROMPTON, "802.1 992 C 792.1 992 782.1 1002 782.1 1012");
    joinStation(LINE_DISTRICT, WEST_BROMPTON, FULHAM_BROADWAY);
    joinStation(LINE_DISTRICT, FULHAM_BROADWAY, PARSONS_GREEN);
    joinStation(LINE_DISTRICT, PARSONS_GREEN, PUTNEY_BRIDGE);
    joinStation(LINE_DISTRICT, PUTNEY_BRIDGE, EAST_PUTNEY);
    joinStation(LINE_DISTRICT, EAST_PUTNEY, SOUTHFIELDS);
    joinStation(LINE_DISTRICT, SOUTHFIELDS, WIMBLEDON_PARK);
    joinStation(LINE_DISTRICT, WIMBLEDON_PARK, WIMBLEDON);

    // District - Earls Court to Kensington
    joinStation(LINE_DISTRICT, EARLS_COURT, KENSINGTON, "802.1 992 C 792.1 992 782.1 982 782.1 972");

    // TODO: missing branches for district

    // Hammersmith
    joinStation(LINE_HAMMERSMITH, HAMMERSMITH, GOLDHAWK_ROAD);
    joinStation(LINE_HAMMERSMITH, GOLDHAWK_ROAD, SHEPHERDS_BUSH_MARKET);
    joinStation(LINE_HAMMERSMITH, SHEPHERDS_BUSH_MARKET, WOOD_LANE);
    joinStation(LINE_HAMMERSMITH, WOOD_LANE, LATIMER_ROAD, "660.29 737.93 C 660.29 733.06 663.11 726.26 666 723");
    joinStation(LINE_HAMMERSMITH, LATIMER_ROAD, LADBROKE_GROVE);
    joinStation(LINE_HAMMERSMITH, LADBROKE_GROVE, WESTBOURNE_PARK);
    joinStation(LINE_HAMMERSMITH, WESTBOURNE_PARK, ROYAL_OAK);
    joinStation(LINE_HAMMERSMITH, ROYAL_OAK, PADDINGTON_2, "738 652 C 744 645.6 752.52 642.7 760.07 642.7");
    joinStation(LINE_HAMMERSMITH, PADDINGTON_2, EDGWARE_ROAD_1);
    joinStation(LINE_HAMMERSMITH, EDGWARE_ROAD_1, BAKER_STREET);
    joinStation(LINE_HAMMERSMITH, BAKER_STREET, GREAT_PORTLAND_STREET);
    joinStation(LINE_HAMMERSMITH, GREAT_PORTLAND_STREET, EUSTON_SQUARE);
    joinStation(LINE_HAMMERSMITH, EUSTON_SQUARE, KINGS_CROSS);
    joinStation(LINE_HAMMERSMITH, KINGS_CROSS, FARRINGDON, "1371.43 643.01 C 1378.98 643.01 1386.08 647.95 1391.42 654.28");
    joinStation(LINE_HAMMERSMITH, FARRINGDON, BARBICAN);
    joinStation(LINE_HAMMERSMITH, BARBICAN, MOORGATE, "1467 729 C 1471 732.95 1476.26 733.4 1480.26 733.4");
    joinStation(LINE_HAMMERSMITH, MOORGATE, LIVERPOOL_STREET);
    joinStation(LINE_HAMMERSMITH, LIVERPOOL_STREET, ALDGATE_EAST, "1630.01 733.4 C 1637.56 733.4 1655 742 1654.8 760.16 L 1654.8 760.16 L 1654.8 806.11 C 1654.8 811.64 1660.38 817.17 1664.6 821.38 L 1664.6 821.38 L 1672.19 828.94 L 1672.19 828.94 C 1676.93 833.68 1680.07 836.05 1686.28 836.05 L 1686.28 836.05 S 1698.71 833.68 1703.45 828.94");
    joinStation(LINE_HAMMERSMITH, ALDGATE_EAST, WHITECHAPEL);
    joinStation(LINE_HAMMERSMITH, WHITECHAPEL, STEPNEY_GREEN);
    joinStation(LINE_HAMMERSMITH, STEPNEY_GREEN, MILE_END, "1808.78 723.63 C 1811.41 721.03 1814.58 719.18 1817.96 717.76 L 1817.96 717.76 C 1821.35 716.37 1824.9 715.43 1828.59 715.41");
    joinStation(LINE_HAMMERSMITH, MILE_END, BOW_ROAD);
    joinStation(LINE_HAMMERSMITH, BOW_ROAD, BROMLEY_BY_BOW);
    joinStation(LINE_HAMMERSMITH, BROMLEY_BY_BOW, WEST_HAM);
    joinStation(LINE_HAMMERSMITH, WEST_HAM, PLAISTOW, "2049.81 715.42 C 2049.93 715.42 2050.04 715.42 2050.15 715.42 L 2050.15 715.42 C 2051.36 715.4 2053.56 714.94 2055.56 714.09 L 2055.56 714.09 C 2057.66 713.25 2059.61 711.96 2060.43 711.1");
    joinStation(LINE_HAMMERSMITH, PLAISTOW, UPTON_PARK);
    joinStation(LINE_HAMMERSMITH, UPTON_PARK, EAST_HAM);
    joinStation(LINE_HAMMERSMITH, EAST_HAM, BARKING);

    // Jubilee
    joinStation(LINE_JUBILEE, CANNONS_PARK, STANMORE);
    joinStation(LINE_JUBILEE, QUEENSBURY, CANNONS_PARK);
    joinStation(LINE_JUBILEE, KINGSBURY, QUEENSBURY);
    joinStation(LINE_JUBILEE, WEMBLEY_PARK, KINGSBURY, "766.6 334.04 C 763.15 330.6 760.34 323.8 760.34 318.93");
    joinStation(LINE_JUBILEE, NEASDEN, WEMBLEY_PARK);
    joinStation(LINE_JUBILEE, DOLLIS_HILL, NEASDEN);
    joinStation(LINE_JUBILEE, WILLESDEN_GREEN, DOLLIS_HILL);
    joinStation(LINE_JUBILEE, KILBURN, WILLESDEN_GREEN);
    joinStation(LINE_JUBILEE, WEST_HAMPSTEAD, KILBURN);
    joinStation(LINE_JUBILEE, FINCHLEY_ROAD, WEST_HAMPSTEAD);
    joinStation(LINE_JUBILEE, SWISS_COTTAGE, FINCHLEY_ROAD);
    joinStation(LINE_JUBILEE, ST_JOHNS_WOOD, SWISS_COTTAGE);
    joinStation(LINE_JUBILEE, BAKER_STREET, ST_JOHNS_WOOD, "1027.1 603.39 C 1027.1 598.52 1024.28 591.72 1020.84 588.28");
    joinStation(LINE_JUBILEE, BOND_STREET, BAKER_STREET);
    joinStation(LINE_JUBILEE, GREEN_PARK, BOND_STREET, "1033.36 857.58 C 1029.92 854.14 1027.1 847.33 1027.1 842.47");
    joinStation(LINE_JUBILEE, WESTMINSTER, GREEN_PARK);
    joinStation(LINE_JUBILEE, WATERLOO, WESTMINSTER, "1201.24 1033.49 C 1201.24 1028.62 1198.43 1021.82 1194.99 1018.38");
    joinStation(LINE_JUBILEE, SOUTHWARK, WATERLOO, "1222.45 1091.34 C 1210.75 1091.34 1201.27 1081.86 1201.27 1070.16");
    joinStation(LINE_JUBILEE, LONDON_BRIDGE, SOUTHWARK, "1478.45 1001.37 C 1473.59 1001.37 1466.78 1004.18 1463.33 1007.62 L 1385.89 1085.08 C 1382.44 1088.53 1375.64 1091.34 1370.77 1091.34");
    joinStation(LINE_JUBILEE, BERMONDSEY, LONDON_BRIDGE);
    joinStation(LINE_JUBILEE, CANADA_WATER, BERMONDSEY);
    joinStation(LINE_JUBILEE, CANARY_WHARF, CANADA_WATER);
    joinStation(LINE_JUBILEE, NORTH_GREENWICH, CANARY_WHARF, "1967.14 995.11 C 1963.69 998.55 1956.9 1001.37 1952.03 1001.37");
    joinStation(LINE_JUBILEE, CANNING_TOWN, NORTH_GREENWICH, "2032.79 920.6 C 2032.79 925.47 2029.97 932.27 2026.52 935.72");
    joinStation(LINE_JUBILEE, WEST_HAM, CANNING_TOWN);
    joinStation(LINE_JUBILEE, STRATFORD, WEST_HAM, "2026.52 623.39 C 2029.97 626.84 2032.79 633.64 2032.79 638.51");

    // Picadilly - Cockfosters to Uxbridge
	joinStation(LINE_PICADILLY, COCKFOSTERS, OAKWOOD);
	joinStation(LINE_PICADILLY, OAKWOOD, SOUTHGATE);
	joinStation(LINE_PICADILLY, SOUTHGATE, ARNOS_GROVE);
	joinStation(LINE_PICADILLY, ARNOS_GROVE, BOUNDS_GREEN);
	joinStation(LINE_PICADILLY, BOUNDS_GREEN, WOOD_GREEN);
	joinStation(LINE_PICADILLY, WOOD_GREEN, TURNPIKE_LANE);
	joinStation(LINE_PICADILLY, TURNPIKE_LANE, MANOR_HOUSE);
	joinStation(LINE_PICADILLY, MANOR_HOUSE, FINSBURY_PARK, "1633.34 314.15 C 1633.34 319.02 1630.53 325.82 1627.08 329.27");
	joinStation(LINE_PICADILLY, FINSBURY_PARK, ARSENAL);
	joinStation(LINE_PICADILLY, ARSENAL, HOLLOWAY_ROAD);
	joinStation(LINE_PICADILLY, HOLLOWAY_ROAD, CALEDONIAN_ROAD);
	joinStation(LINE_PICADILLY, CALEDONIAN_ROAD, KINGS_CROSS);
	joinStation(LINE_PICADILLY, KINGS_CROSS, RUSSELL_SQUARE, "1305.58 650.78 C 1302.13 654.22 1299.31 661.02 1299.31 665.89");
	joinStation(LINE_PICADILLY, RUSSELL_SQUARE, HOLBORN, "1299.31 764.63 C 1299.31 769.5 1296.49 776.3 1293.05 779.74");
	joinStation(LINE_PICADILLY, HOLBORN, COVENT_GARDEN);
	joinStation(LINE_PICADILLY, COVENT_GARDEN, LEICESTER_SQUARE);
	joinStation(LINE_PICADILLY, LEICESTER_SQUARE, PICCADILLY_CIRCUS, "1206.9 865.89 C 1203.46 869.33 1196.66 872.15 1191.78 872.15");
	joinStation(LINE_PICADILLY, PICCADILLY_CIRCUS, GREEN_PARK);
	joinStation(LINE_PICADILLY, GREEN_PARK, HYDE_PARK_CORNER, "1034.83 872.15 C 1029.96 872.15 1023.16 874.97 1019.71 878.41");
	joinStation(LINE_PICADILLY, HYDE_PARK_CORNER, KNIGHTSBRIDGE);
	joinStation(LINE_PICADILLY, KNIGHTSBRIDGE, SOUTH_KENSINGTON, "927.08 971.03 C 923.64 974.47 916.83 977.3 911.96 977.3");
	joinStation(LINE_PICADILLY, SOUTH_KENSINGTON, GLOUCESTER_ROAD);
	joinStation(LINE_PICADILLY, GLOUCESTER_ROAD, EARLS_COURT);
	joinStation(LINE_PICADILLY, EARLS_COURT, BARONS_COURT);
	joinStation(LINE_PICADILLY, BARONS_COURT, HAMMERSMITH);
	joinStation(LINE_PICADILLY, HAMMERSMITH, TURNHAM_GREEN);
	joinStation(LINE_PICADILLY, TURNHAM_GREEN, ACTON_TOWN, "");
	joinStation(LINE_PICADILLY, ACTON_TOWN, EALING_COMMON, "");
	joinStation(LINE_PICADILLY, EALING_COMMON, NORTH_EALING);
	joinStation(LINE_PICADILLY, NORTH_EALING, PARK_ROYAL);
	joinStation(LINE_PICADILLY, PARK_ROYAL, ALPERTON);
	joinStation(LINE_PICADILLY, ALPERTON, SUDBURY_TOWN);
	joinStation(LINE_PICADILLY, SUDBURY_TOWN, SUDBURY_HILL);
	joinStation(LINE_PICADILLY, SUDBURY_HILL, SOUTH_HARROW);
	joinStation(LINE_PICADILLY, SOUTH_HARROW, RAYNERS_LANE, "365.73 318.19 C 365.73 313.32 362.9 306.53 359.46 303.09");
	joinStation(LINE_PICADILLY, RAYNERS_LANE, EASTCOTE);
	joinStation(LINE_PICADILLY, EASTCOTE, RUISLIP_MANOR);
	joinStation(LINE_PICADILLY, RUISLIP_MANOR, RUISLIP, "288.15 232.12 C 285.35 229.32 279.81 226.3 275.25 226.3");
	joinStation(LINE_PICADILLY, RUISLIP, ICKENHAM);
	joinStation(LINE_PICADILLY, ICKENHAM, HILLINGDON);
	joinStation(LINE_PICADILLY, HILLINGDON, UXBRIDGE);

    // Picadilly - Hatton Cross to Heathrow Terminals 123
	joinStation(LINE_PICADILLY, HATTON_CROSS, HEATHROW_TERMINAL_4, "131.33 1192.97 C 126.67 1197.63 124.34 1203.73 124.34 1209.85");
	joinStation(LINE_PICADILLY, HEATHROW_TERMINAL_4, HEATHROW_TERMINALS_123, "124.34 1257.6 C 124.34 1263.71 122.01 1269.82 117.35 1274.48 M 117.35 1274.48 C 117.12 1274.72 117.35 1274.48 117.35 1274.48 M 117.35 1274.48 C 113.03 1278.79 107.06 1281.47 100.48 1281.47 M 100.48 1281.47 C 94.37 1281.47 88.26 1279.13 83.61 1274.48 M 83.61 1274.48 C 79.29 1270.14 76.63 1264.18 76.63 1257.6 M 76.63 1257.6 C 76.63 1251 79.3 1245.02 83.64 1240.7");

    // Picadilly - Acton Town to Hatton Cross
	joinStation(LINE_PICADILLY, SOUTH_EALING, ACTON_TOWN, "340.73 983.57 C 344.17 980.12 350.97 977.31 355.84 977.31");
	joinStation(LINE_PICADILLY, NORTHFIELDS, SOUTH_EALING);
	joinStation(LINE_PICADILLY, BOSTON_MANOR, NORTHFIELDS);
	joinStation(LINE_PICADILLY, OSTERLEY, BOSTON_MANOR);
	joinStation(LINE_PICADILLY, HOUNSLOW_EAST, OSTERLEY);
	joinStation(LINE_PICADILLY, HOUNSLOW_CENTRAL, HOUNSLOW_EAST);
	joinStation(LINE_PICADILLY, HOUNSLOW_WEST, HOUNSLOW_CENTRAL);
	joinStation(LINE_PICADILLY, HATTON_CROSS, HOUNSLOW_WEST);

    // Picadilly - Hatton Cross to Heathrow Terminal 5
	joinStation(LINE_PICADILLY, HATTON_CROSS, HEATHROW_TERMINALS_123);
	joinStation(LINE_PICADILLY, HEATHROW_TERMINALS_123, HEATHROW_TERMINAL_5);

    // Victoria
	joinStation(LINE_VICTORIA, BRIXTON, STOCKWELL);
	joinStation(LINE_VICTORIA, STOCKWELL, VAUXHALL);
	joinStation(LINE_VICTORIA, VAUXHALL, PIMLICO, "1049.24 1217.55 C 1045.8 1214.11 1042.98 1207.31 1042.98 1202.44");
	joinStation(LINE_VICTORIA, PIMLICO, VICTORIA);
	joinStation(LINE_VICTORIA, VICTORIA, GREEN_PARK);
	joinStation(LINE_VICTORIA, GREEN_PARK, OXFORD_CIRCUS, "1042.98 861 C 1042.98 856.12,1045.8 849.32 1049.24 845.89");
	joinStation(LINE_VICTORIA, OXFORD_CIRCUS, WARREN_STREET);
	joinStation(LINE_VICTORIA, WARREN_STREET, EUSTON);
	joinStation(LINE_VICTORIA, EUSTON, KINGS_CROSS, "1285.8 609.33 C 1289.24 605.89 1296.04 603.06 1300.91 603.06");
	joinStation(LINE_VICTORIA, KINGS_CROSS, HIGHBURY_AND_ISLINGTON, "1514.36 603.06 C 1519.23  603.06 1526.03 600.25 1529.48 596.81 L 1565.73 560.56 M 1565.73 560.56 C 1569.17 557.12 1571.98 550.32 1571.98 545.45");
	joinStation(LINE_VICTORIA, HIGHBURY_AND_ISLINGTON, FINSBURY_PARK, "1571.98 430.4 C 1571.98 425.53 1574.8 418.7 1578.24 415.29");
	joinStation(LINE_VICTORIA, FINSBURY_PARK, SEVEN_SISTERS, "1645.92 347.63 C 1649.36 344.18 1656.16 341.36 1661.03 341.36");
	joinStation(LINE_VICTORIA, SEVEN_SISTERS, TOTTENHAM_HALE);
	joinStation(LINE_VICTORIA, TOTTENHAM_HALE, BLACKHORSE_ROAD);
	joinStation(LINE_VICTORIA, BLACKHORSE_ROAD, WALTHAMSTOW_CENTRAL);
}

function addLine(name, color) {
    var id = getLineId(name);
	lines[id] = new Line(name, color);
}

function addStation(lineName, stationName, x, y) {
	var id = getStationId(lineName, stationName);

    var line = lines[getLineId(lineName)];
	stations[id] = new Station(stationName, line, x, y);
}

function joinStation(lineName, stationNameA, stationNameB, joinSvg) {
    var id = getLineId(lineName);

	if (connections[id] === undefined) {
		connections[id] = [];
	}
	
	var stationA = stations[getStationId(lineName, stationNameA)];
	var stationB = stations[getStationId(lineName, stationNameB)];

	connections[id].push(new Connection(stationA, stationB, joinSvg));
}

function getLineId(lineName) {
    return lineName.toAlphanumeric().toLowerCase();
}

function getStationId(lineName, stationName) {
	return (lineName.toAlphanumeric() + '-' + stationName.toAlphanumeric()).toLowerCase();
}

// Strip out non alphanumeric characters.
String.prototype.toAlphanumeric = function() {
	return this.replace(/\W/g, '');
};

function Line(name, colour) {
	this.name = name;
	this.colour = colour;

    this.getId = function() {
        return getLineId(this.name);
    };
}

function Station(name, line, x, y) {
    this.name = name;
    this.line = line;
    this.x = x;
    this.y = y;

    this.getId = function() {
        return getStationId(line.name, name);
    };

    this.getCoords = function() {
        return this.x + " " + this.y;
    };
}

function Connection(stationA, stationB, joinSvg) {
	this.stationA = stationA;
	this.stationB = stationB;
	this.joinSvg = joinSvg;
}
